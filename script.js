// ---------- data ----------
const archive = [
  {
    col1: "the great white erection",
    col2: "2025",
    col3: "p5.js, ableton, uv printing",
    col4: "web-based, publication",
    col5: "in-progress",
    description: `<p>in october, i started studying the 622-metre hammersmith flyover. the elevated structure carries the a4 road over a busy central junction in the borough of hammersmith. it was built in 1961 by white, male individuals, pushing and pulling equipment in an <a href="https://www.londonsscreenarchives.org.uk/title/19773/" target="_blank" style="color: blue; text-decoration: underline;">erotic dance</a> of construction work. the flyover is composed of a continuous hollow spine beam, 26 feet wide, with arms to support the outer carriageways. a hollow interior runs the whole length of the structure, accommodating surface drainage, electricity supply, and a water main feeding fire hydrants above. its slender and elegant lines, along with its self-regulating functions, make it impossible to view as passive or unintelligent. instead, it emerges as a dynamic, (female) entity intricately tied to its environment, its identity inscribed by the powerful white men who built it.</p>
                  <p>&nbsp;</p>
                  <p>at night, i hear cars passing over the flyover. i wonder where people are going so late. i ask myself if my interest in <a href="https://www.researchgate.net/publication/227700296_Container_Technologies" target="_blank" style="color: blue; text-decoration: underline;">container technologies</a> is a compensation for my own relative deficiency in the container department. upon waking, i salute the flyover along with the rising sun. it never rests. its automated systems ensure a 24-hour facilitating environment to meet the demands of our metropolis. similar to mothers, who nurture and provide for their infants. i can tell the structure is worn down. rust and other imperfections have quietly settled onto its membrane. perhaps, being porous enables intimacy with its surroundings. can its embrace help me better understand my sexuality or reconcile the relationship with my father? more broadly, does perceiving architecture as an extension of our skin challenge views of gender roles? i use binary code (0s and 1s) to probe these questions, exposing the downfalls of societal binaries, and offering ways to bridge the gaps.</p>      
                  <p>&nbsp;</p>
                  <p>//references</p>
                  <p>london's screen archives, <a href="https://www.londonsscreenarchives.org.uk/title/19773/" target="_blank" style="color: blue; text-decoration: underline;">the hammersmith flyover, hammersmith</a>, 1961</p>
                  <p>do ho suh, <a href="https://www.itsnicethat.com/news/do-ho-suh-bridging-homes-art-260918" target="_blank" style="color: blue; text-decoration: underline;">bridging home</a>, 2018</p>
                  <p>gloria e. anzaldúa, <a href="https://likeawhisper.wordpress.com/wp-content/uploads/2010/03/anzaldua-now-let-us-shift.pdf" target="_blank" style="color: blue; text-decoration: underline;">light in the dark, chapter 6</a>, 2016</p>
                  <p>andrea long chu, <a href="https://www.are.na/block/25966066" target="_blank" style="color: blue; text-decoration: underline;">females</a>, 2019</p>
                  <p>zoë soﬁa, <a href="https://www.researchgate.net/publication/227700296_Container_Technologies" target="_blank" style="color: blue; text-decoration: underline;">container technologies</a>, 2000</p>
                  <p>serpentine galleries, <a href="https://open.spotify.com/episode/1C7PSJMVpnrXkKiJ0JwTDb?si=pQewpY9JT6yCapEy2Jsl3A" target="_blank" style="color: blue; text-decoration: underline;">intimacies: surroundings</a>, 2023</p>
                  <p>&nbsp;</p>`,
    images: [
      "images/thegreatwhiteerection/thegreatwhiteerection.png",
      "iframe:https://kilianhoppner.github.io/thegreatwhiteerection/",
      "iframe:https://kilianhoppner.github.io/3dspring/"
      
    ]
  },
  {
    col1: "electronic superhighway",
    col2: "2025",
    col3: "p5.js, ableton",
    col4: "web-based",
    col5: "in-progress",
    description: `<p>electronic superhighway is a term coined in 1974 by video art pioneer <a href="https://en.wikipedia.org/wiki/Nam_June_Paik" target="_blank" style="color: blue; text-decoration: underline;">nam june paik</a>. it forecasts technology’s ability to disseminate information and form global connections. using this notion as a starting point, i conduct a series of experiments alluding to: algorithms, information extraction, data as material, digital ecosystems as contested marketplaces etc., in an attempt to understand the fabric that holds together our communication networks.</p>
                  <p>&nbsp;</p>
                  <p> fig.01 visualises the international organisation for migration's (iom) dtm sudan displacement data from 30 september 2025. it depicts the movement of internally displaced persons (idps) between states, showing the origin and destination of populations. keyboard shortcuts: (h)hide map, (l)line, (e)export.</p>
                  <p>&nbsp;</p>
                  <p>//references</p>
                  <p>international organisation for migration (iom), <a href="https://dtm.iom.int/sudan" target="_blank" style="color: blue; text-decoration: underline;">dtm sudan report</a>, 2025</p>
                  <p>ryoji ikeda, <a href="https://www.180studios.com/data-cosm" target="_blank" style="color: blue; text-decoration: underline;">data-cosm [nº1]</a>, 2023</p>
                  <p>ai weiwei, <a href="https://en.wikipedia.org/wiki/Human_Flow" target="_blank" style="color: blue; text-decoration: underline;">human flow</a>, 2017</p>
                  <p>yoko ono, john lennon, <a href="https://www.londonsscreenarchives.org.uk/title/19773/" target="_blank" style="color: blue; text-decoration: underline;">the war is over!</a>, 1969</p>
                  <p>charlotte lengersdorf, <a href="https://charlottelengersdorf.com/index.html" target="_blank" style="color: blue; text-decoration: underline;">text/dance editor: writing choreography</a>, 2025</p>
                  <p>&nbsp;</p>`,
    images: [
      "iframe:https://kilianhoppner.github.io/ELECTRONICSUPERHIGHWAY-MAP/",
      
    ]
  },
  {
    col1: "#surveillancecore pt.01",
    col2: "2024",
    col3: "p5.js",
    col4: "interactive installation",
    col5: "completed",
    description: `<p>#surveillancecore pt.01 is an interactive installation made in collaboration with <a href="https://www.linkedin.com/in/hannah-ogawa-9931ab303/" target="_blank" style="color: blue; text-decoration: underline;"><u>hannah ogawa</u></a>. the camera in fig.01 is coded to track people's faces and detect their emotions. by transforming personal interactions into data, the installation prompts viewers to reflect on surveillance technology and its capability to blur boundaries between connection and control. it invites critical examination of privacy, agency, and the ethics of observation in the digital age.</p>
                  <p>&nbsp;</p>
                  <p>//references</p>
                  <p>nam june paik, <a href="https://www.artgallery.nsw.gov.au/collection/works/342.2011.a-f/" target="_blank" style="color: blue; text-decoration: underline;">tv buddha</a>, 1976</p>
                  <p>skepta, <a href="https://www.youtube.com/watch?v=rC-J4x-oTto" target="_blank" style="color: blue; text-decoration: underline;">#skeptacore pt.2</a>, 2023</p>
                  <p>ryoji ikeda, <a href="https://www.ryojiikeda.com/project/datamatics/" target="_blank" style="color: blue; text-decoration: underline;">datamatics</a>, 2006</p>
                  <p>transwhite studio, <a href="https://tokyotypedirectorsclub.org/en/award/2024_tdc_03/" target="_blank" style="color: blue; text-decoration: underline;">aranya plein air</a>, 2023</p>
                  <p>&nbsp;</p>`,
    images: [
      "iframe:https://kilianhoppner.github.io/surveillancecore-pt.1/",
      "images/surveillancecorept.01/motiontracking.gif",
      "images/surveillancecorept.01/surveillancecorept.01_03.png"
    ]
  },
  {
    col1: "the weather room",
    col2: "2024",
    col3: "processing",
    col4: "interactive installation",
    col5: "completed",
    description: `<p>the weather room is an installation created in collaboration with <a href="https://www.isobellemccall.com/" target="_blank" style="color: blue; text-decoration: underline;">isobelle mccall</a> as part of an interactive media course at the university of melbourne. in the space, viewers can influence the ambience through their presence. projected light changes colour from dark blue tones to warm orange hues based on how loud it gets in the room. this creates an audio-visual representation of the human experience with the environment, inviting a reflection of our relationship with nature.</p>
                  <p>&nbsp;</p>
                  <p>//references</p>
                  <p>olafur eliasson, <a href="https://olafureliasson.net/artwork/the-weather-project-2003/" target="_blank" style="color: blue; text-decoration: underline;">the weather project</a>, 2003</p>
                  <p>james turrell, <a href="https://www.pacegallery.com/exhibitions/james-turrell-elemental/" target="_blank" style="color: blue; text-decoration: underline;">elemental</a>, 2022</p>
                  <p>julinka ebhardt, francesco tacchini, will yates-johnson, <a href="https://vimeo.com/87979136" target="_blank" style="color: blue; text-decoration: underline;">space replay</a>, 2014</p>
                  <p>john warwicker, <a href="https://www.johnwarwicker.com/sony-connected-identity-1/ez6vgi16gtvobpccjsmq013z90rru2" target="_blank" style="color: blue; text-decoration: underline;">sony connected identity</a>, 2001</p>
                  <p>&nbsp;</p>`,
    images: ["images/theweatherroom/theweatherroom01.png", "images/theweatherroom/theweatherroom02.png", "images/theweatherroom/theweatherroom03.png" ]
  }
];

// ---------- DOM refs & state ----------
const tableBody = document.getElementById('tableBody');
const toggleAllBtn = document.getElementById('toggleAll');
let allExpanded = false;
const expandedStates = Object.fromEntries(archive.map(e => [e.col1, false]));

// ---------- helper: create media cell ----------
function createMediaCell(mediaValue, idx) {
  const td = document.createElement('td');
  td.classList.add("media-cell");   // <— add this
  td.style.verticalAlign = 'top';
  const wrapper = document.createElement('div');
  wrapper.className = 'img-container';
  td.appendChild(wrapper);

  if (!mediaValue) {
    const img = document.createElement('img');
    img.className = 'thumb-img';
    img.alt = `project image ${idx}`;
    img.src = 'images/image.png';
    wrapper.appendChild(img);
    return td;
  }

  if (typeof mediaValue === 'string' && mediaValue.startsWith('iframe:')) {
    const url = mediaValue.slice('iframe:'.length);

    // responsive wrapper (intrinsic ratio)
    const ar = document.createElement('div');
    ar.style.position = 'relative';
    ar.style.width = '100%';
    ar.style.maxWidth = '800px';
    ar.style.paddingTop = '65.125%'; // 521 / 800 * 100%
    ar.style.overflow = 'hidden';

    const iframe = document.createElement('iframe');
    iframe.src = url;
    iframe.title = `embedded-${idx}`;
    iframe.frameBorder = '0';
    iframe.loading = 'lazy';
    iframe.allow = 'camera; microphone; fullscreen; autoplay';
    iframe.allowFullscreen = true;
    iframe.style.position = 'absolute';
    iframe.style.top = '0';
    iframe.style.left = '0';
    iframe.style.width = '100%';
    iframe.style.height = '100%';
    iframe.style.border = '0';

    ar.appendChild(iframe);
    wrapper.appendChild(ar);
    return td;
  }

  if (typeof mediaValue === 'string' && mediaValue.trim().startsWith('<iframe')) {
    wrapper.innerHTML = mediaValue;
    return td;
  }

  const img = document.createElement('img');
  img.className = 'thumb-img';
  img.alt = `project image ${idx}`;
  img.src = mediaValue;
  wrapper.appendChild(img);
  return td;
}

// ---------- render table ----------
function renderTable() {
  tableBody.innerHTML = '';

  archive.forEach(entry => {
    const row = document.createElement('tr');
    row.innerHTML = `
      <td>${entry.col1}</td>
      <td>${entry.col2}</td>
      <td>${entry.col3}</td>
      <td>${entry.col4}</td>
      <td>
        ${entry.col5}
        ${entry.col5.toLowerCase() === 'in-progress' ? '<span class="status-dot"></span>' : ''}
      </td>
      <td></td>
      <td></td> <!-- NEW 7th column -->
    `;
    row.addEventListener('click', () => {
      expandedStates[entry.col1] = !expandedStates[entry.col1];
      updateRows();
    });
    tableBody.appendChild(row);

    const descRow = document.createElement('tr');
    descRow.className = 'description-row';
    descRow.id = `desc-${entry.col1}`;

    descRow.appendChild(document.createElement('td'));

    const descTd = document.createElement('td');
    descTd.className = 'desc-cell';
    descTd.colSpan = 3;
    descTd.innerHTML = entry.description || '';
    descRow.appendChild(descTd);

    const m0 = createMediaCell(entry.images?.[0], 1);
    const m1 = createMediaCell(entry.images?.[1], 2);
    const m2 = createMediaCell(entry.images?.[2], 3); // NEW 3rd image → 7th column
    
    descRow.appendChild(m0);
    descRow.appendChild(m1);
    descRow.appendChild(m2);

    tableBody.appendChild(descRow);
  });

  updateRows();
}

// ---------- update rows ----------
function updateRows() {
  archive.forEach(entry => {
    const descRow = document.getElementById(`desc-${entry.col1}`);
    if (descRow) {
      descRow.style.display = expandedStates[entry.col1] ? 'table-row' : 'none';
    }
  });
  allExpanded = archive.every(e => expandedStates[e.col1]);
  toggleAllBtn.textContent = allExpanded ? '—' : '+';
}

// ---------- toggle all ----------
toggleAllBtn.addEventListener('click', () => {
  allExpanded = !allExpanded;
  archive.forEach(e => expandedStates[e.col1] = allExpanded);
  updateRows();
});

// initial render
renderTable();

